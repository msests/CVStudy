## 概述

**pHash**（Perceptual Hash）是一种基于图像内容生成唯一指纹的技术，通过算法将图像转化为固定长度的哈希值。相似的图像会产生相近的哈希值，常用于：
- 图像相似性检测
- 版权保护
- 重复图片识别
- 数字内容取证

## 计算步骤

1. **图像预处理**
   - 缩小尺寸：通常缩放到 32x32 像素。
   - 灰度化：转换为灰度图像。
   
2. **离散余弦变换 (DCT)**
   - 对图像进行二维DCT变换。
   - 保留低频分量（左上角 8x8 区域）。

> DCT变换用于将信号从空域转换为频域，信息集中在低频信号中。

3. **计算哈希值**
   - 计算 DCT 系数的平均值。
   - 生成二进制哈希：系数 > 平均值为1，否则为0。

## 对比其他哈希方法

| 特性    | pHash | aHash（平均哈希） | dHash（差异哈希） |
| ----- | ----- | ----------- | ----------- |
| 抗缩放   | 高     | 中           | 低           |
| 抗旋转   | 中     | 低           | 低           |
| 颜色敏感度 | 低     | 高           | 中           |
| 计算复杂度 | 较高    | 低           | 低           |

## 优缺点分析

**优势：**

- 对图像缩放、色彩变化鲁棒性强。

- 可检测经过编辑的相似图像。

- 哈希值长度固定（通常64位）。

**局限：**

- 无法抵抗大幅度裁剪。

- 对几何变形敏感（如旋转）。

- 计算成本高于aHash/dHash。

> **判断标准**：汉明距离 < 5 通常认为图像相似，> 10 视为不同图像