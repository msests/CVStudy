## 概述

**dHash**（Difference Hash，差异哈希）是一种基于相邻像素差异生成哈希值的算法。核心特点：
- 捕捉图像边缘特征
- 对内容布局敏感
- 计算速度仅次于aHash
- 哈希长度通常为64位

## 核心原理

1. **图像预处理**
	+ 缩放尺寸：调整到 9x8 像素（制造纵向相邻像素对）。
	+ 灰度化：转换为单通道灰度图。

2. **计算横向差异**
	+ 用Row+1行减去Row行得到差异矩阵。

3. **哈希生成逻辑**
	- 生成64位二进制字符串（8x8矩阵）。
    - 每个bit代表相邻像素的明暗关系。

## 关键应用场景

- **网页截图比对**：检测页面元素位置变化。

- **OCR预处理**：识别文档版式变动。

- **视频关键帧提取**：检测画面突变点。

- **界面自动化测试**：验证UI元素布局。

## 优缺点分析

**优势：**

- 对物体位移敏感。

- 保留边缘特征信息。

- 计算效率较高（适合实时处理）。

- 抵抗轻微色彩变化。

**局限：**

- 无法识别镜像翻转。

- 对旋转敏感（>5度失效）。

- 受噪点影响较大。

## 高级优化方案

1. **梯度增强**：结合Sobel算子强化边缘。

2. **多方向差异**：增加纵向差异计算。

3. **区域加权**：重点区域差异放大。

4. **动态阈值**：根据图像亮度自动调整对比灵敏度。

> **判断标准**：汉明距离 ≤ 3 视为布局相同，≥ 8 判定为显著差异